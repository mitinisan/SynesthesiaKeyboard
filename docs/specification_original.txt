基本仕様書

プロジェクト名: 共感覚キーボードアプリ (Synesthetic Keyboard)
対象ユーザー: 4歳〜7歳の児童 バージョン: 1.0

1. プロジェクト概要
文字と色の個人的な結びつき（共感覚）を可視化する知育・創作アプリケーション。ユーザーはひらがな・カタカナ・英数字の一文字ごとに自分だけの色を設定し、その設定を用いて手紙やメッセージを作成できる。操作画面は低年齢層向けに最適化され、視覚的・直感的な操作を主とする。

2. 画面構成 (UI構造)
ウィンドウ構成: シングルウィンドウ形式（モーダルダイアログ併用）。

ワークスペース:

左側: 文字種切り替えタブ。

中央〜右側: 動的キーボードグリッド。

上部中央: 固定サイズの「便箋（レターペーパー）」エリア (500x250px)。

トップバー: BGM設定、スタンプ（シール）トグルボタン。

コントロールパネル: モード切替（色設定/書く）、テーマ選択、プレビュー/保存ボタン。

3. 主要機能モジュール
3.1. モード管理ロジック
アプリは以下の2つの状態で動作する。

色設定モード (Setting Mode):

便箋エリアはグレーアウト（非活性）される。

キーボードの文字を押すと色選択モーダルが起動する。

機能キー（改行、スペース、削除）は無効化される。

執筆モード (Writing Mode):

便箋エリアが活性化（明るく表示）される。

キーを押すと、設定された色で文字が入力される。

打鍵音（効果音）が有効になる。

3.2. 色カスタマイズ機能
操作フロー: 対象の文字を選択 → モーダル表示。

モーダルUI:

ステップ1 (色相): 24色の基本色（虹色スペクトル＋無彩色）から選択。

ステップ2 (濃淡): 選択した色の3段階の明度（原色・淡色・パステル）から選択。

即時反映: 選択完了後、キーボード上の文字色が即座に更新される。

3.3. 文字入力・編集機能
キーボード配列:

日本語 (ひらがな・カタカナ): 伝統的な五十音図配列（右から左への縦書きカラム配置）。

英数字: 10列グリッド（左から右への配置）。

編集ツール:

仮想カーソル: 入力位置を示す点滅するキャレット（赤色）。

ナビゲーション: 上下左右の矢印キーによるカーソル移動。

削除: Backspaceキーによる直前の文字削除。

空白・改行: Spaceキー、Enterキー。

約物: 、 。 ！ ？ の専用キー。

3.4. デコレーション機能
テーマ (スキン): 便箋の背景画像と枠線を変更（例：ミニマル、ユニコーン、ネイチャー）。

スタンプ (オーバーレイ):

ドロワー: イラストや絵文字を格納した開閉式パネル。

操作: ドラッグ＆ドロップによる配置。

レイヤー: スタンプは文字層の「上」に配置され、配置後もドラッグ移動が可能。

3.5. 音響機能
BGM再生: 落ち着いたクラシック音楽のループ再生（ジムノペディ、月の光など）。

打鍵音: 文字入力時の「ポロン」という効果音（ミュート切り替え可能）。

3.6. 出力・保存機能
プレビューモード: UI（キーボード、タブ、バー）を非表示にし、作品のみを全画面表示する。

画像保存: 便箋エリア（文字、背景、スタンプ含む）を静止画ファイル（JPG/PNG）として書き出す。