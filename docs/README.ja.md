<div align="center">
  <a href="../README.md">🇺🇸 English</a> |
  <a href="README.pt.md">🇧🇷 Português</a> |
  <a href="README.ja.md">🇯🇵 日本語</a>
</div>

---

# 🎹 共感覚キーボード (Synesthesia Keyboard)

![App Screenshot](assets/screenshot.png)

書記素色覚（文字に色がついて見える共感覚）を持つ小さな人たちのためのバーチャルキーボード。

「7-5-3」というトランプゲームがあります。基本的に、これらの数字が出たらそのカードを取るというゲームです。先日、娘とこれで遊んでいたとき、彼女が何度か「2」を取ろうとするのを不思議に思いました。私は2つの違いについて浅く説明し、食器を洗いにいきました。すると彼女は、7（黄色）、5（緑）、3（青）、そして2（赤）を塗り分けたスケッチブックを持って戻ってきて、2が赤色だからダイヤやハートの5を2と間違えてしまうのだと説明してくれました。私が「？」という顔をしていると、パートナーが「！」という顔をして、それが共感覚であると熱心に説明してくれました。それを聞いて、味覚に反応して風景を描くような創造性がまだ残っていた自分の学生時代を思い出しました。

せっかく新しくプログラミングの知識を身につけたのだから、彼女の視点に合わせて文字の色をマッピングするアプリを作ってみようと思い立ちました。どうやらよくある現象のようなので、興味のある方のためにコードとデータを公開することにしました。少なくとも3クォーク離れた距離で、人々が互いに波長を合わせる助けになれば幸いです。

## ✨ 機能

基本的に、英数字と日本語の五十音を備えたキーボードで、2つのモードがあります。「カラー」モードでは、各文字に色を定義できます。
「ライティング」モードでは、カスタマイズしたキーボードを使って短いテキストを作成できます。作業全体が退屈にならないように、バックグラウンドサウンドを鳴らすボタンと、インターフェースのカラー設定を変更するボタンを追加しました。手紙が殺風景にならないよう、背景の紙を変更したり、ステッカーで装飾を仕上げることもできます。手紙が完成したら、「見る」を押して最終結果を確認し、気に入ったらダウンロードするだけです。

* **🎨 色の選択:** 最初はグラデーションのカラーサークルを作ってより自由に選べるようにする予定でしたが、最終的には直接色を選択するシンプルなバージョンを採用しました。参考として[日本の伝統色](https://www.colordic.org/w)のパレットを使用しており、各色の上にそれぞれの名前が表示されます。

* **🔉 文字の音:** 文字の音を生成するためにアプリ（[VOICEVOX](https://voicevox.hiroshiba.jp/)）を使用することにしました。日本語の各子音と母音を細かく制御する必要がある場合、これは非常に優れたソフトウェアです。私の専門はプロセス自動化なので、引き続き良いライブラリを探すつもりですが、素材を制作する人にとっては素晴らしいツールです。

* **🏳️‍🌈 ペーパーテーマ:** プロンプトを直接Nano Bananaに投げて画像の結果を制御するのは困難でした。まずGeminiに指示を与え、その後でイラストの作成を依頼する方が、希望に近い画像が得られます。画像生成を自動化するために、無料の画像ライブラリやフラクタルジェネレーターを探すことも考えています。またはASCIIへの変換など（例: [ascii_magik](https://github.com/LeandroBarone/python-ascii_magic/)）。Geminiが生成する画像は非常に重いため、PIL（pillow）ライブラリの「量子化（quantization）」プロセスを使用して、品質を落とさずに画像を縮小しました。

* **🍭 ステッカー:** 画像生成を自動化できればステッカーも作成しようと考えていましたが、そのテーマを掘り下げる時間がなかったため、絵文字を使用することにしました。Markdownで使用する[絵文字リスト](https://gohugo.io/quick-reference/emojis/)の例。

* **🎶 BGM:** MIDI形式の音楽制作に[music21](https://music21.org/music21docs/)ライブラリを使用しました。アレンジとMP3への変換には、利便性の高い[musescore](https://musescore.org/ja)を使用しました。PyQt5のネイティブ関数ではエンコーディングの競合が発生したため、アプリ内で音楽を再生するためにpygameライブラリを使用する必要がありました。

* **🌤️ 画面モード:** これはcss3とほぼ同じであるPyQt5ライブラリのqssファイルを探索するために作成された機能です。バリエーションはプロンプトエンジニアリングによって自動生成されました。

* **🇯🇵 🇧🇷 🇺🇸 翻訳:** アプリを起動すると、英語、日本語、ポルトガル語の3つの言語から選択できます。情報量が少ないため、翻訳を含む辞書を作成することにしました。

* **🍡 カラープロファイル:** 例として3つのカラープロファイルを作成しました。新しいプロファイルごとに新しいJSONファイルが生成され、各色の定義が自動的に記録されます。未来のための視覚的な記憶です。

## 🛠️ 技術スタック

* **言語|バージョン:** Python 3.13.5
* **UI フレームワーク:** PyQt5 (スタイリング用 QSS)
* **オーディオエンジン:** `pygame`
* **音楽ロジック:** `music21`
* **アセット処理:** `Pillow` (PIL)
* **AI アシスタント:** Gemini 3.0

## 📂 プロジェクト構造

```text
SynesthesiaKeyboard/
├── main.py                 # 構造と初期化
├── requirements.txt        # ライブラリ
├── src/                    
│   ├── config.py           # 変数
│   └── widgets.py          # 関数
└── assets/                 
    ├── bgm/                # MP3|WAV
    ├── modes/              # QSS
    ├── profiles/           # JSON
    ├── sounds/             # WAV
    └── themes/             # PNG
```

## 🚀 始め方

### 前提条件

お使いのマシンに [Python 3](https://www.python.org/downloads/) と `git` がインストールされていることを確認してください。

### ターミナルからのインストール (MacOS)

1. リポジトリをクローンします:
   ```bash
   git clone [https://github.com/mitinisan/SynesthesiaKeyboard.git](https://github.com/mitinisan/SynesthesiaKeyboard.git)
   cd SynesthesiaKeyboard
   ```

2. 必要なライブラリをインストールします:
   ```bash
   pip install -r requirements.txt
   ```

3. アプリケーションを起動します:
   ```bash
   python main.py
   ```

## 欠陥 (Flaws)

全体としてこのアプリケーションは目的を果たしていますが、完璧ではなく、修正すべき一連の欠陥があります。
もし本当に私に直してほしいなら、チャイでも奢ってくれたら相談に乗ります。
分解してデバッグすることで多くのことを学べるので、友よ、幸運を祈ります！


## 📝 ライセンス

このプロジェクトは [MIT ライセンス](LICENSE) に基づいてライセンスされています。詳細は LICENSE ファイルをご覧ください。